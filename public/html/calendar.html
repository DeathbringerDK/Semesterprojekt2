<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <link href='../css/fullcalendar.min.css' rel='stylesheet' />
    <link href='../css/fullcalendar.print.min.css' rel='stylesheet' media='print' />
    <script src='../js/lib/moment.min.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="/js/testEvents.js"></script>
    <script src='../js/lib/fullcalendar.min.js'></script>

    <script>
        $(document).ready(function() {
            $('#calendar').fullCalendar({
                height: "auto",
                defaultDate: $('#calendar').fullCalendar('today'),
                weekNumbers: true,
                weekNumbersWithinDays: true,
                weekNumberCalculation: 'ISO',
                selectable: true, // vælg datoer
                select: function(start, end) {

                    var eventData = {
                        title: localStorage.getItem('currentUser'), //username/id skal ind her, når det virker.
                        start: start,
                        color: 'green'
                    };

                    $.ajax({
                            url: '/calendarbookingpost',
                            method: 'POST',
                            // ID skal også med HER - husk at hive id med ned fra server ved login.	
                            data: {
                                date: start._d,
                                currentUser: localStorage.getItem('currentUser')
                            }
                        })
                        .done(function(dataStr) {
                            var data = JSON.parse(dataStr);
                            console.log('from server: ', data);
                        });
                    $('#calendar').fullCalendar('renderEvent', eventData, true); // stick? = true


                    $('#calendar').fullCalendar('unselect'); // så man kan vælge igen. 
                },
                editable: false,
                eventLimit: true
            }); // allow "more" link when too many events
            initUnavailableDates();
        });

    </script>
    <style>
        body {
            max-width: 1200px;
            width: auto;
            margin-top: 40px;
            padding: 0;
            font-family: "Lucida Grande", Helvetica, Arial, Verdana, sans-serif;
            font-size: 14px;
        }
        
        #calendar {
            margin: 0 auto;
        }

    </style>
</head>

<body>
    <!--	<button type="button" onclick="initUnavailableDates()"></button>-->

    <div id='calendar'></div>

</body>

</html>
